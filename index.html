<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/rsvp/rsvp.min.js"></script>
    <script src="js/request.js"></script>
    <script src="js/utils.js"></script>
    <script>
        $(function () {

            $(window).unload( function () { alert("再见了!"); } );
            //查询笔记
            $("#b01").click(function () {
                var data = {"user_id":"1","book_id":"20","auth_token":"1111"};
                EPUB.Request.bookStoreRequest("/retech-bookstore/mobile/post/my/singlebook/note/list", data).then(function (r) {
                    $("#showNote").html(JSON.stringify(r));
                });
            });

            //保存笔记
            $("#b02").click(function () {
                /*var data = new FormData();
                data.append("user_id","1");
                data.append("book_id","20");
                data.append("auth_token","1111");
                data.append("chapter_index", "111");
                data.append("chapter_name", "2222");
                data.append("position", "1,20");
                data.append("position_offset", "1,20");
                data.append("summary_content", "234235234534");
                data.append("note_content", "565643453");
                data.append("summary_underline_color","red");
                data.append("add_time", "2014-09-01 22:11:22");
                data.append("process","11");*/
                var data = {"user_id":"1","book_id":"20","auth_token":"1111","chapter_index":"111","chapter_name":"222","position":"1,20","position_offset":"1,20","summary_content":"234235234534","note_content": "565643453","summary_underline_color":"red","add_time":"2014-09-01 22:11:22","process":"11"};
                EPUB.Request.bookStoreRequest("/retech-bookstore/mobile/post/my/note/save", data).then(function (r) {
                    $("#saveNote").html(JSON.stringify(r));
                });
            });

            //删除笔记
            $("#b03").click(function () {
                var noteid = $("#deleNote").val();
                /*var data = new FormData();
                data.append("user_id","1");
                data.append("auth_token","1111");
                data.append("id",noteid);*/
                var data = {"user_id":"1","book_id":"20","id":noteid};
                EPUB.Request.bookStoreRequest("/retech-bookstore/mobile/post/my/note/delete", data).then(function (r) {
                    alert(JSON.stringify(r))
                });
            });

            //查询书签
            $("#b04").click(function () {
                /*var data = new FormData();
                data.append("user_id","1");
                data.append("auth_token","dfdfdf");
                data.append("book_id","20");*/
                var data = {"user_id":"1","book_id":"20","auth_token":"1111"};
                EPUB.Request.bookStoreRequest("/retech-bookstore/mobile/post/my/singlebook/bookmark/list", data).then(function (r) {
                    $("#showMark").html(JSON.stringify(r));
                });
            });

            //保存书签
            $("#b05").click(function () {
                /*var data = new FormData();
                data.append("user_id","1");
                data.append("auth_token","1111");
                data.append("book_id","20");
                data.append("chapter_index","3");
                data.append("chapter_name","111");
                data.append("position","10");
                data.append("add_time","2015-01-10 11:11:11");
                data.append("summary_content","322452353464356");*/
                var data = {"user_id":"1","book_id":"20","auth_token":"1111","chapter_index":"3","chapter_name":"111","position":"10","add_time":"2015-01-10 11:11:11","summary_content":"322452353464356"};
                EPUB.Request.bookStoreRequest("/retech-bookstore/mobile/post/my/bookmark/add", data).then(function (r) {
                    $("#saveMark").html(JSON.stringify(r));
                });
            });

            //删除书签
            $("#b06").click(function () {
                var markid = $("#deleMark").val();
               /* var data = new FormData();
                data.append("user_id","1");
                data.append("auth_token","1111");
                data.append("id",markid);*/
                var data = {"user_id":"1","book_id":"20","id":markid};
                EPUB.Request.bookStoreRequest("/retech-bookstore/mobile/post/my/bookmark/delete", data).then(function (r) {
                    alert(JSON.stringify(r))
                });
            });
            $.isEmptyObject();
            //查询进度
            $("#b07").click(function () {
                /*var data = new FormData();
                data.append("user_id","1");
                data.append("auth_token","dfdfdf");
                data.append("book_id","20");*/
                var data = {"user_id":"1","book_id":"20","auth_token":"1111"};
                EPUB.Request.bookStoreRequest("/retech-bookstore/mobile/post/my/singlebook/readprogress/get", data).then(function (r) {
                    $("#showProgress").html(JSON.stringify(r));
                });
            });

            //保存进度
            $("#b08").click(function () {
                /*var data = new FormData();
                data.append("user_id","1");
                data.append("auth_token","dfdfdf");
                data.append("book_id","20");
                data.append("chapter_index","3");
                data.append("position","10");
                data.append("progress","no");*/
                var data = {"user_id":"1","book_id":"20","auth_token":"1111","chapter_index":"3","position":"23","progress":"no"};
                EPUB.Request.bookStoreRequest("/retech-bookstore/mobile/post/my/readprogress/save", data).then(function (r) {
                    $("#saveProgress").html(JSON.stringify(r));
                });
            });
        });
        window.onbeforeunload = function (event) {
            var message = 'Important: Please click on \'Save\' button to leave this page.';
            if (typeof event == 'undefined') {
                event = window.event;
            }
            if (event) {
                event.returnValue = message;
            }
            return message;
        };
    </script>
</head>
<body>
<div id="showNote">
    笔记列表显示区域
</div>
<button id="b01" type="button">
    显示笔记
</button>

<div id="saveNote">
    保存笔记
</div>
<button id="b02" type="button">
    保存笔记
</button>

<div>
    <input type="text" id="deleNote"/>
</div>
<button id="b03"> 删除笔记</button>

<div id="showMark">
    书签列表显示区域
</div>
<button id="b04" type="button">
    显示书签
</button>

<div id="saveMark">
    保存书签
</div>
<button id="b05" type="button">
    保存书签
</button>

<div>
    <input type="text" id="deleMark"/>
</div>
<button id="b06"> 删除书签</button>

<div id="showProgress">
    显示进度
</div>
<button id="b07" type="button">
    显示进度
</button>

<div id="saveProgress">
    保存进度
</div>
<button id="b08" type="button">
    保存进度
</button>

<hr/>
<!-- JiaThis Button BEGIN -->
<div class="jiathis_style_32x32" style=" width: 216px; position: absolute; top: 441px; left: 673px;">
    <a class="jiathis_button_qzone"></a>
    <a class="jiathis_button_tsina"></a>
    <a class="jiathis_button_tqq"></a>
    <a class="jiathis_button_weixin"></a>
    <a class="jiathis_button_renren"></a>
</div>
<!-- JiaThis Button END -->
</body>
<script>
    /*$('input[type=button]').click(function() {
        $('input[type=file]').trigger('click');
    });
*/
    var jiathis_config = {
        summary: "wwytest",
        siteName: "网站名字"
    }

</script>
<script type="text/javascript" src="http://v2.jiathis.com/code/jia.js" charset="utf-8"></script>
</html>